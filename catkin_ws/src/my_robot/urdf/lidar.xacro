<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro">

  <!-- Define LiDAR parameters -->
  <xacro:property name="lidar_name" value="my_lidar" />
  <xacro:property name="lidar_frame" value="laser_link" />
  <xacro:property name="lidar_radius" value="0.1" />  <!-- radius of the lidar from robot center -->
  <xacro:property name="lidar_height" value="0.5" />  <!-- height above ground -->
  <xacro:property name="lidar_angle_min" value="-1.5708" /> <!-- LiDAR min angle (in radians) -->
  <xacro:property name="lidar_angle_max" value="1.5708" />  <!-- LiDAR max angle (in radians) -->
  <xacro:property name="lidar_range" value="10.0" />  <!-- Max range of the LiDAR in meters -->
  <xacro:property name="lidar_resolution" value="0.5" />  <!-- Angle resolution of the LiDAR -->

  <!-- Link to represent the LiDAR -->
  <link name="${lidar_name}_link">
    <!-- LiDAR geometry (simplified as a cylinder for illustration) -->
    <visual>
      <geometry>
        <cylinder radius="${lidar_radius}" length="0.1"/>
      </geometry>
      <material name="green"/>
    </visual>
    <collision>
      <geometry>
        <cylinder radius="${lidar_radius}" length="0.1"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.5"/>
      <inertia  ixx="0.0001" iyy="0.0001" izz="0.0001"/>
    </inertial>
  </link>

  <!-- Joint to attach the LiDAR to the robot -->
  <joint name="${lidar_name}_joint" type="fixed">
    <parent link="base_link"/> <!-- Parent link to attach LiDAR -->
    <child link="${lidar_name}_link"/> <!-- Child link representing the LiDAR -->
    <origin xyz="0 ${lidar_height} 0" rpy="0 0 0"/> <!-- Position and orientation of the LiDAR -->
  </joint>

  <!-- Sensor (LiDAR) setup -->
  <gazebo>
    <sensor type="ray" name="${lidar_name}_sensor">
      <pose>0 0 0 0 0 0</pose>  <!-- Position of the sensor in the LiDAR frame -->
      <ray>
        <scan>
          <horizontal>
            <samples>720</samples> <!-- Number of scan points -->
            <resolution>${lidar_resolution}</resolution> <!-- Angular resolution -->
            <min_angle>${lidar_angle_min}</min_angle> <!-- Minimum angle -->
            <max_angle>${lidar_angle_max}</max_angle> <!-- Maximum angle -->
          </horizontal>
        </scan>
        <range>
          <min>${lidar_range}</min>
          <max>${lidar_range}</max>
        </range>
      </ray>
    </sensor>
  </gazebo>

</robot>

